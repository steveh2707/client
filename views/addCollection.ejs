<%- include('components/header') %>
<%- include('components/navbar') %>


<form method="POST" class="needs-validation" id="send" action="/addcollection" novalidate>

  <div class="myheadings">
    <h3>Add Collection
    </h3>



    <!-- <div class="mb-3 addcollection">

      <label for="exampleFormControlInput1" class="form-label">Collection Name</label>

      <input type="text" class="form-control" id="collectionnameinput" placeholder="Collection Name"
        name="collectionname" required>

      <div class="invalid-feedback">
        Please choose a username.
      </div>

    </div> -->

    <div class="addcollection">
      <p>Add Collection Name and select desired albums from the list below</p>
      <div class="input-group mb-3">
        <span class="input-group-text">Collection Name</span>

        <input type="text" class="form-control" id="collectionnameinput" placeholder="Collection Name"
          aria-label="CollectionName" name="collectionname" required>

        <button class="btn btn-primary" type="submit" id="button-addon2">Add Collection</button>

        <div class="invalid-feedback">
          Please choose a Collection Name.
        </div>
      </div>
    </div>






  </div>

  <table class="table table-dark align-middle">
    <thead>
      <tr>
        <th scope="col" class="text-center">Add?</th>
        <th scope="col" class="text-center">Image</th>
        <th scope="col">Album Name</th>
        <th scope="col">Artist</th>
        <th scope="col" class="text-center">Release Year</th>
        <th scope="col" class="text-center">Record Label</th>
        <th scope="col" class="text-center">Genre</th>
      </tr>
    </thead>
    <tbody>



      <% data.forEach(album=> { %>

      <tr>
        <th scope="row" class="text-center">
          <input class="form-check-input" type="checkbox" name="album_id" value=<%= album.album_id %> aria-label="...">
        </th>
        <td class="imageholder">
          <a href="/albums/<%= album.album_id %>">
            <img class="image" src=<%=album.cover_image_url %>>
          </a>
        </td>
        <td>
          <a class="link-none" href="/albums/<%= album.album_id %>"><%= album.album_name %></a>
        </td>
        <td>
          <% album.albumArtists.forEach(artist=> { %>
          <a class="link-none" href="/artists/<%= artist.artist_id %>">
            <%= artist.artist_name %>
          </a>
          <% }) %>
        </td>
        <td class="text-center"><%= album.release_year %></td>
        <td class="text-center"><%= album.record_label_name %></td>
        <td class="text-center"><%= album.genre_name %></td>
      </tr>

      <% }) %>



    </tbody>
  </table>



</form>


<script>

  // Example starter JavaScript for disabling form submissions if there are invalid fields
  (() => {
    'use strict'

    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    const forms = document.querySelectorAll('.needs-validation')

    // Loop over them and prevent submission
    Array.from(forms).forEach(form => {
      form.addEventListener('submit', event => {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }

        form.classList.add('was-validated')
      }, false)
    })
  })()
</script>

<%- include('components/footer') %>